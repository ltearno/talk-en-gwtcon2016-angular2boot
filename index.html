<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="author" content="Arnaud Tournier - @ltearno - LTE Consulting - JavaOne 2016 - San Francisco"><title>Angular 2 Boot</title><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui" name="viewport"><link href="reveal.js/css/reveal.css" rel="stylesheet"><link rel="stylesheet" href="reveal.js/css/theme/moon.css" id="theme"><link href="reveal.js/lib/css/zenburn.css" rel="stylesheet"><script>document.write( '<link rel="stylesheet" href="reveal.js/css/print/' + ( window.location.search.match( /print-pdf/gi ) ? 'pdf' : 'paper' ) + '.css" type="text/css" media="print">' );</script></head><body><div class="reveal"><div class="slides"><section><h1>Angular 2 Boot</h1><p><small>Arnaud Tournier - @ltearno - LTE Consulting - JavaOne 2016 - San Francisco</small></p></section><section id="_arnaud_tournier"><h2>Arnaud Tournier</h2><div class="paragraph"><p><strong>LTE Consulting</strong> founder.</p></div>
<div class="paragraph"><p>Speaker <strong>Devoxx France</strong>, <strong>JUGs</strong>, <strong>GWT.create</strong>, <strong>GWTCon</strong>, etc&#8230;&#8203;</p></div>
<div class="paragraph"><p>Training : Java, C#, .net, Typescript, GWT, Angular 2, JavaEE, Spring, git&#8230;&#8203;</p></div>
<div class="paragraph"><p>Email : <a href="mailto:ltearno@gmail.com">ltearno@gmail.com</a></p></div>
<div class="paragraph"><p>Twitter : <a href="https://twitter.com/ltearno">@ltearno</a></p></div>
<div class="paragraph"><p>Web : <a href="http://www.lteconsulting.fr">www.lteconsulting.fr</a></p></div>
<div class="paragraph"><p>Full stack (x86_64 to JavaScript)</p></div></section>
<section id="_this_presentation_is_online"><h2>This presentation is online!</h2><div class="paragraph"><p><a href="http://lteconsulting.fr/angular2boot-javaone/">lteconsulting.fr/angular2boot-javaone</a></p></div>
<div class="paragraph"><p><em>works on your phone too ;)</em></p></div>
<div class="paragraph"><p>Demo code available at</p></div>
<div class="ulist"><ul><li><p><a href="https://github.com/ltearno/tour-of-heroes">github.com/ltearno/tour-of-heroes</a></p></li><li><p><a href="https://github.com/ltearno/angular2boot-demos">github.com/ltearno/angular2boot-demos</a></p></li></ul></div></section>
<section id="_angular_2_boot"><h2>Angular 2 Boot?</h2><div class="paragraph"><p>A new RIA paradigm for Java : programming Angular 2 with Java 8.</p></div>
<div class="paragraph"><p><strong>The coolest Java 8 RIA framework in the place ;)</strong></p></div>
<div class="paragraph"><p><a href="http://lteconsulting.fr/angular2boot/">lteconsulting.fr/angular2boot</a></p></div></section>
<section id="_a_more_technical_title"><h2>A more technical title&#8230;&#8203;</h2><div class="paragraph"><p>Integrating Angular 2 and GWT 2.8:</p></div>
<div class="paragraph"><p><strong>problems</strong> and <strong>solutions</strong>&#8230;&#8203;</p></div></section>
<section id="_why"><h2>Why?</h2><div class="paragraph"><p>Angular 2 natively supports Typescript and Javascript.</p></div>
<div class="paragraph"><p>Angular 2 for Dart is maintained by the Dart team.</p></div>
<div class="paragraph"><p>Nevertheless <strong>Java</strong> has all the required features. And it brings strong typing.</p></div>
<div class="imageblock" style=""><div class="content"><img src="images/angular-languages.png" alt="angular languages"></div></div>
<div class="paragraph"><p>Why is not Java in the party? <strong>Let&#8217;s remedy!</strong></p></div></section>
<section id="_"><div class="paragraph"><p>It all started as an experiment&#8230;&#8203;</p></div>
<div class="paragraph"><p>But since it rocks, I wanted to show it to the world!</p></div>
<aside class="notes"><div class="paragraph"><p>Qui ici (a) fait du GWT ? En refera ?</p></div>
<div class="paragraph"><p>Qui a un backend Java et front en JS ?</p></div>
<div class="paragraph"><p>Java permet de maitriser la complexité d&#8217;une grosse base de code (donc plutot grosses applications). Taille moyenne des applications GWT : au moins 100000 loc.</p></div></aside></section>
<section><section id="_the_recipe" data-background="images/ingredients.jpg"><h2>The recipe</h2><div class="paragraph"><p>&nbsp;</p></div></section><section id="_angular_2"><h2>Angular 2</h2><div class="ulist"><ul><li><p>non invasive,</p></li><li><p>efficient,</p></li><li><p>modern architecture, simple and effective.</p></li></ul></div></section><section id="_gwt_2_8"><h2>GWT 2.8</h2><div class="ulist"><ul><li><p><strong>Java 8</strong> (strong typing, lambdas, streams, &#8230;&#8203;)</p></li><li><p><strong>JsInterop</strong> (easy integration with JS)</p></li><li><p><strong>SuperDevMode</strong> (compile on reload)</p></li><li><p>Optimized compilation (generated js size, efficiency)</p></li></ul></div></section><section id="_jsr_269"><h2>JSR 269</h2><div class="ulist"><ul><li><p>Java Annotation Processing API,</p></li><li><p>Code generation integrated with compilation,</p></li><li><p>Boilerplate code generation.</p></li></ul></div></section><section id="_spring_boot"><h2>Spring Boot</h2><div class="ulist"><ul><li><p>Standalone server application (µ-service friendly),</p></li><li><p>Easy to start with,</p></li><li><p>Rich API,</p></li><li><p><em>Note: Angular2Gwt works with <strong>any</strong> backend</em>.</p></li></ul></div></section></section>
<section id="_presentation_structure"><h2>Presentation structure</h2><div class="ulist"><ul><li><p>Angular 2,</p></li><li><p>GWT,</p></li><li><p>Angular2Boot,</p></li><li><p>Demonstration,</p></li><li><p>Challenges,</p></li><li><p>Roadmap,</p></li><li><p>Q&amp;A</p></li></ul></div></section>
<section><section id="_angular"><h2>Angular</h2><div class="paragraph"><p>Angular 1 was released in 2009.</p></div></section><section id="_at_that_time_there_was_not_a_lot_of_javascript_ria_frameworks"><h2>At that time, there was not a lot of Javascript RIA frameworks</h2></section><section id="_angular_brought_the_strong_data_binding_strong_into_the_browser"><h2>Angular brought the <strong>Data binding</strong> into the browser</h2></section><section id="_and_you_suddendly_were_able_to_write_a_todo_list_application_in_15_lines_of_code"><h2>And you suddendly were able to write a todo list application in 15 lines of code!</h2></section><section id="_enormous_success"><h2>Enormous success!</h2><div class="imageblock" style=""><div class="content"><img src="images/angular-success.png" alt="angular success"></div></div></section><section id="_millions_of_applications_were_built_with_angular"><h2>Millions of applications were built with Angular</h2></section><section id="_when_it_came_to_evolve_the_framework_the_team_decided_to_build_upon_the_enormous_return_of_experience_they_had"><h2>When it came to evolve the framework, the team decided to build upon the (enormous) return of experience they had&#8230;&#8203;</h2></section><section id="_and_they_decided_to_write_angular_2_from_scratch"><h2>And they decided to write Angular 2 from scratch!</h2></section><section id="_why_what_were_the_problems"><h2>Why? What were the problems?</h2></section><section id="_architectural_problems"><h2>Architectural problems&#8230;&#8203;</h2><div class="ulist"><ul><li><p>Dynamic scoping,</p></li><li><p>Slow dirty checking,</p></li><li><p>Insane amount of directives to learn,</p></li><li><p>Difficult debugging&#8230;&#8203;</p></li></ul></div></section></section>
<section><section id="_angular_2_fundamentals"><h2>Angular 2 fundamentals</h2><div class="ulist"><ul><li><p>Modules,</p></li><li><p>Components,</p></li><li><p>Dependency Injection,</p></li><li><p>Change detection.</p></li></ul></div></section><section id="_modules"><h2>Modules</h2><div class="paragraph"><p>Parts of the application are encapsulated into <em>modules</em>.</p></div>
<div class="paragraph"><p>Leads to clean code and more advanced AOT compilation.</p></div></section><section id="_components"><h2>Components</h2><div class="paragraph"><p>Basic blocks of your application.</p></div>
<div class="paragraph"><p>A component is:</p></div>
<div class="ulist"><ul><li><p>a <em>view</em> (template),</p></li><li><p>and a <em>model</em> (data and methods).</p></li></ul></div>
<div class="paragraph"><p>Interaction between view and model through <em>data binding</em>.</p></div></section><section id="_components_2"><h2>Components</h2><div class="paragraph"><p>Each component is responsible for a part of the DOM tree.</p></div>
<div class="paragraph"><p>Components also form a tree.</p></div>
<div class="paragraph"><p>Components can interacts with each other through cleanly defined ways.</p></div></section><section id="_components_tree"><h2>Components tree</h2><div class="imageblock" style=""><div class="content"><img src="images/angular-components.png" alt="angular components"></div></div></section><section id="_dependency_injection"><h2>Dependency Injection</h2><div class="paragraph"><p>Sharing services between components.</p></div>
<div class="paragraph"><p>Lifecycle and dependencies are managed by Angular.</p></div>
<div class="paragraph"><p>Each component has a Dependency Injector.</p></div>
<div class="paragraph"><p>Those also form a tree.</p></div></section><section id="_change_detection"><h2>Change detection</h2><div class="paragraph"><p>Angular uses Zone.js to track changes.</p></div>
<div class="paragraph"><p>Zones == <em>asynchronous TLS</em>.</p></div>
<div class="paragraph"><p>Preserve an execution context accross asynchronous calls.</p></div>
<div class="paragraph"><p><em>(done by patching most of the browsers async functions)</em></p></div></section></section>
<section><section id="_gwt"><h2>GWT</h2></section><section id="_history"><h2>History</h2><div class="paragraph"><p>First version released in 2006.</p></div>
<div class="paragraph"><p>Really big success!</p></div>
<div class="paragraph"><p>Community of ~ 100k+ developpers.</p></div></section><section id="_context"><h2>Context</h2><div class="paragraph"><p>At that time, Javascript ecosystem sucked!</p></div>
<div class="paragraph"><p>Browsers were incompatible&#8230;&#8203;</p></div>
<div class="paragraph"><p>Developping complex web applications was &#8230;&#8203; hell!</p></div></section><section id="_what_gwt_brought"><h2>What GWT brought</h2><div class="ulist"><ul><li><p>Hide browsers inconsistencies,</p></li><li><p>Widgets to build the UI : Swing-like,</p></li><li><p>A complete toolkit for the Web (resource caching, RPC, &#8230;&#8203;),</p></li><li><p>A very good compiler!</p></li></ul></div></section><section id="_compiler_power_sample" data-transition="fade-in"><h2>Compiler power sample</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">Shape s = new Square(2);
int a = s.getArea();</code></pre></div></div></section><section id="_becomes" data-transition="fade-in"><h2>Becomes</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">Square s = new Square(2); // No need for the Shape interface
int a = s.getArea();</code></pre></div></div></section><section id="_becomes_2" data-transition="fade-in"><h2>Becomes</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">Square s = new Square(2);
int a = s.length * s.length; // Method inlining</code></pre></div></div></section><section id="_and_then" data-transition="fade-in"><h2>And then</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">int a = 4; // constants resolution</code></pre></div></div>
<div class="paragraph"><p>All that at <strong>compile time</strong>!</p></div></section><section id="_and_now_in_2016"><h2>And now in 2016</h2><div class="ulist"><ul><li><p>The Javascript ecosystem really rocks! (we need to leverage that)</p></li><li><p>The evergreen browsers are compatible (do not require a layer above them anymore)</p></li></ul></div></section><section id="_gwt_problems"><h2>GWT problems</h2><div class="ulist"><ul><li><p>The compilation was (really very) slow.</p></li><li><p>GWT did too much: <em>build system, optimisations, permutations, not following standards, proprietary RPC, code change detection, templating&#8230;&#8203;</em></p></li><li><p>Many things GWT did are now available as <em>standard</em> web tools.</p></li></ul></div></section><section id="_in_other_words"><h2>In other words</h2><div class="paragraph"><p>GWT is now very far away from the Web we know today.</p></div></section><section id="__2"><table class="tableblock frame-all grid-all" style="width:100%"><colgroup><col style="width:50%"><col style="width:50%"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">GWT-RPC</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">REST Json Web services</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Widgets</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Native HTML5 (ok lacks encapsulation)</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Code splitting</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">ES7 modules, WebPack code splitting</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Optimisations</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Closure compiler, &#8230;&#8203;</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Code Generators</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JSR-269</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">JVM debugging</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">SourceMaps</p></td></tr></tbody></table></section><section id="_gwt_2_8_2"><h2>GWT 2.8</h2><div class="paragraph"><p>GWT 2.8 is the transition version to a new future:</p></div>
<div class="ulist"><ul><li><p>JsInterop,</p></li><li><p>Java 8 language,</p></li><li><p>Time to drop Widgets and old stuff!</p></li></ul></div></section><section id="_gwt_3_aka_j2cl"><h2>GWT 3 (aka J2Cl)</h2><div class="paragraph"><p><em>not released yet</em></p></div>
<div class="ulist"><ul><li><p>Lightweight,</p></li><li><p>More unopiniated (can be integrated anywhere),</p></li><li><p>Drops a lot of functionalities done now by standard tools.</p></li></ul></div></section></section>
<section><section id="_gwt_fundamentals"><h2>GWT fundamentals</h2></section><section id="_the_compiler"><h2>The compiler</h2><div class="ulist"><ul><li><p>Preserves Java semantic,</p></li><li><p>Still does a bunch of optimisations (pruning, static analysis..),</p></li><li><p>Mostly ouputs modern Javascript, optimizable with Closure Compiler.</p></li></ul></div></section><section id="_jsinterop"><h2>JsInterop</h2><div class="paragraph"><p>A very easy way to integrate Javascript and Java code.</p></div>
<div class="paragraph"><p>A two-way road (JS&#8594;Java, Java&#8594;JS)</p></div></section><section id="_jsinterop_2"><h2>JsInterop</h2><div class="paragraph"><p>To use JS code from Java, you just have to describe the JS type :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@JsType( isNative = true )
public class XMLHttpRequest
{
  @JsMethod
  public native void open( String method, String url );

  @JsMethod
  public native void send( Object data );

  // ...
}</code></pre></div></div></section><section id="_jsinterop_3"><h2>JsInterop</h2><div class="paragraph"><p>Then use the class as a normal Java class</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">XMLHttpRequest request = new XMLHttpRequest();

request.open( "GET", "service.json" );
request.setOnreadystatechange( event -&gt; {
  ...
};

request.send( ... );</code></pre></div></div></section><section id="_jsinterop_4"><h2>JsInterop</h2><div class="paragraph"><p>And the other way around (exporting Java to JS)</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">package fr.lteconsulting;

@JsType
public class Robot
{
  @JsProperty
  private boolean wifiOn;

  @JsConstructor
  public Robot( DataService dataService ) { ... }

  @JsMethod
  protected void move() { ... }
}</code></pre></div></div></section><section id="_jsinterop_5"><h2>JsInterop</h2><div class="paragraph"><p>In Javascript :</p></div>
<div class="listingblock"><div class="content"><pre class="highlight"><code class="javascript language-javascript">let robot = new fr.lteconsulting.Robot( dataService )

robot.wifiOn = true

robot.move()</code></pre></div></div>
<div class="paragraph"><p><em>ps: can we drop semicolons in Java?</em></p></div></section><section id="_superdevmode"><h2>SuperDevMode</h2><div class="ulist"><ul><li><p>Fast incremental compiler for development,</p></li><li><p>Compile time function of code changes and not code base size!</p></li></ul></div></section></section>
<section><section id="_jsr_269_pluggable_annotation_processing_api"><h2>JSR 269 - Pluggable Annotation Processing API</h2><div class="paragraph"><p>Code generation in Java (source, byte-code and resource).</p></div><div class="paragraph"><p>Integrated with the Java compiler.</p></div><div class="paragraph"><p>Based on annotations. The developer&#8217;s annotation processor receives parts of the program&#8217;s AST.</p></div></section><section id="_good_points"><h2>GOOD POINTS</h2><div class="paragraph"><p>API is easy to use.</p></div>
<div class="paragraph"><p>Generated code is visible and debuggable,</p></div>
<div class="paragraph"><p>Generated code is known before end of compilation so you can reference it in your code.</p></div>
<div class="paragraph"><p>No overhead at runtime.</p></div>
<div class="paragraph"><p>(Does not depend on byte code: GWT compatible)</p></div></section><section id="_how_it_works"><h2>HOW IT WORKS</h2><div class="paragraph"><p>You must register your Annotation processors (through SPI).</p></div>
<div class="paragraph"><p>Java source files are compiled during rounds.</p></div>
<div class="paragraph"><p>Each round, processors are activated and receive the program&#8217;s AST.</p></div>
<div class="paragraph"><p>They can then generate files which will be part of the next round.</p></div>
<div class="paragraph"><p>When no file is generated during a round, real compilation happens.</p></div></section><section id="_annotation_processor"><h2>Annotation processor</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@SupportedAnnotationTypes("fr.lteconsulting.AutoUi")
@SupportedSourceVersion(SourceVersion.RELEASE_8)
public class AutoUiProcessor extends AbstractProcessor  {
    @Override
    public boolean process(
            Set&lt;TypeElement&gt; annotations,
            RoundEnvironment round) {
        for(TypeElement element :
            round.getElementsAnnotatedWith(AutoUi.class)) {
            ...
            JavaFileObject javaFile = filer.createSourceFile(classFqn);
            Writer writer = javaFile.openWriter();
            ...
        }
        return true;
    }
}</code></pre></div></div></section><section id="_java_workflow"><h2>Java workflow</h2><div class="imageblock" style=""><div class="content"><img src="images/javac-flow.png" alt="javac flow"></div></div></section><section id="_just_one_more_thing"><h2>Just one more thing</h2><div class="paragraph"><p>A processor can break the compilation by outputting errors.</p></div>
<div class="paragraph"><p>It can also provide the user with tips by outputting warnings.</p></div>
<div class="imageblock" style=""><div class="content"><img src="images/error-in-eclipse.png" alt="error in eclipse"></div></div></section></section>
<section><section id="_angular2boot"><h2>Angular2Boot</h2><div class="ulist"><ul><li><p>Angular2Gwt: GWT and Angular2 integration library,</p></li><li><p>Spring boot: powerful and simple backend,</p></li><li><p>Dead simple bootstrapping to begin development.</p></li></ul></div></section><section id="_easy_to_try"><h2>Easy to try</h2><div class="listingblock"><div class="content"><pre class="highlight"><code>mvn archetype:generate \
  -DarchetypeGroupId=fr.lteconsulting \
  -DarchetypeArtifactId=angular2-gwt.archetype \
  -DarchetypeVersion=1.5

mvn clean install

java -jar target/YOUR_ARTIFACT_ID.jar</code></pre></div></div></section><section id="_compile_on_reload"><h2>Compile on reload</h2><div class="listingblock"><div class="content"><pre class="highlight"><code># Backend
mvn spring-boot:run

# Frontend
mvn gwt:run-codeserver</code></pre></div></div></section><section id="_production_code"><h2>Production code</h2><div class="listingblock"><div class="content"><pre class="highlight"><code>mvn clean install</code></pre></div></div>
<div class="paragraph"><p>You get an autonomous fat jar!</p></div></section><section id="_architecture"><h2>Architecture</h2></section><section id="__3" data-transition="none" data-background="images/archi-survol.png" data-background-size="contain"></section><section id="__4" data-transition="none" data-background="images/archi-compil.png" data-background-size="contain"></section><section id="__5" data-transition="none" data-background="images/archi-runtime.png" data-background-size="contain"></section><section id="__6" data-transition="none" data-background="images/archi-sdm.png" data-background-size="contain"></section><section id="__7" data-transition="none" data-background="images/archi-survol.png" data-background-size="contain"></section><section id="__8" data-transition="none" data-background="images/archi-compil-zoom.png" data-background-size="contain"></section><section id="__9" data-transition="none" data-background="images/archi-runtime-zoom.png" data-background-size="contain"></section><section id="__10" data-transition="none" data-background="images/archi-sdm-zoom.png" data-background-size="contain"></section><section id="_java_javascript_communication"><h2>Java/Javascript communication</h2><div class="paragraph"><p>JsInterop can do that.</p></div>
<div class="paragraph"><p><strong>Java</strong> can provide components to <strong>Angular</strong> runtime.</p></div>
<div class="paragraph"><p>And vice-versa.</p></div></section><section id="_feeding_angular_with_metadatas"><h2>Feeding Angular with metadatas</h2><div class="paragraph"><p>Angular requires metadata on components (<em>DI, routing, inputs/ouputs, &#8230;&#8203;</em>)</p></div>
<div class="paragraph"><p>Angular uses ES7/Typescript <strong>decorators</strong> (ex <strong>@Component()</strong>).</p></div>
<div class="paragraph"><p>Those decorators alter component&#8217;s constructor at runtime.</p></div>
<div class="paragraph"><p>Less required <em>boilerplate</em> code.</p></div></section><section id="_in_java"><h2>In Java?</h2><div class="paragraph"><p>Annotations can play the role of decorators (ex <strong>@Component</strong>).</p></div>
<div class="paragraph"><p>Those are processed at <strong>compile</strong> time.</p></div>
<div class="paragraph"><p>And generate RTTI code for Angular.</p></div></section><section id="_how"><h2>How?</h2><div class="ulist"><ul><li><p>JSR-269 is used to generate RTTI,</p></li><li><p>Use Angular JS api through JsInterop to provide the RTTI.</p></li></ul></div></section><section id="_how_2"><h2>How?</h2><div class="ulist"><ul><li><p>Fetch Java class compiled JS constructor at runtime with JsInterop,</p></li><li><p>Patch it with Angular required metadata,</p></li><li><p>Provide the patched constructor function to Angular.</p></li></ul></div></section><section id="_consistent_syntax"><h2>Consistent syntax</h2><div class="paragraph"><p>The developper should be able to read JS documentation and know <em>how</em> to code in Java.</p></div>
<div class="paragraph"><p>In brief, we want syntax consistency.</p></div></section><section id="_typescript_written_component"><h2>Typescript written component</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="javascript language-javascript">@Component( { selector: "my-hero-detail",
  templateUrl: "hero-detail.component.html",
  styleUrls: "hero-detail.component.css" } )
export class HeroDetailComponent
{
  @Input() hero = null;
  @Output() updated = new EventEmitter();

  HeroDetailComponent( private HeroService heroService ) {}

  ngOnInit() { ... }

  // ...
}</code></pre></div></div></section><section id="_java_equivalent"><h2>Java equivalent</h2><div class="listingblock"><div class="content"><pre class="highlight"><code class="java language-java">@Component( selector = "my-hero-detail",
  templateUrl = "hero-detail.component.html",
  styleUrls = "hero-detail.component.css" )
@JsType
public class HeroDetailComponent implements OnInit
{
  @Input public Hero hero = null;
  @Output public EventEmitter&lt;Hero&gt; updated = new EventEmitter&lt;&gt;();

  private HeroService heroService;

  public HeroDetailComponent( HeroService heroService )
  {
    this.heroService = heroService;
  }

  @Override
  public void ngOnInit() { ... }

  // ...
}</code></pre></div></div></section><section id="_module_loading_problem"><h2>Module loading problem</h2><div class="paragraph"><p>GWT is not SystemJS (ES7 modules) friendly.</p></div>
<div class="paragraph"><p>Need to generate a bundle with all Angular inside (you can choose/build your bundle depending on what you need).</p></div></section><section id="_the_instanceof_problem"><h2>The instanceof problem</h2><div class="paragraph"><p>Angular checks at runtime that components are valid.</p></div>
<div class="paragraph"><p>With SuperDevMode, code is loaded in an external frame thus breaking <code>instanceof</code> operator.</p></div>
<div class="paragraph"><p>Few places needed to be patched <em>(for dev mode only)</em>.</p></div></section><section id="_building_angular"><h2>Building Angular</h2><div class="paragraph"><p>Angular 2 requires a strict environment to be built.</p></div>
<div class="paragraph"><p>Docker to the rescue!</p></div>
<div class="paragraph"><p>&#8658; From RC6 to final: 1 hour of work!</p></div></section><section id="_legacy_gwt_widgets_integration"><h2>Legacy GWT Widgets integration</h2><div class="paragraph"><p>In fact it worked out of the box, no problem, cool!</p></div>
<div class="paragraph"><p><code>WidgetAdapterPanel</code>&#8230;&#8203;</p></div></section><section id="_emulating_es6_get_and_set_operators"><h2>Emulating ES6 get and set operators</h2><div class="paragraph"><p>Java does not provide this language facility&#8230;&#8203;</p></div>
<div class="paragraph"><p>JsInterop neither&#8230;&#8203;</p></div>
<div class="paragraph"><p>So we use JSR-269 to generate trampoline functions, triggered by <code>@PropertyGetter</code> and <code>@Input</code> annotations.</p></div></section><section id="_testing"><h2>Testing</h2><div class="ulist"><ul><li><p>Unit tests,</p></li><li><p>Integration tests.</p></li></ul></div></section><section id="_unit_tests"><h2>Unit tests</h2><div class="ulist"><ul><li><p>No production-ready way to do that with Angular yet,</p></li><li><p>Difficult to use the <code>GWTTestCase</code> facility (need to bootstrap Angular in the testing environment which runs under HTMLUnit which is not ready for ES6. More, GWT uses Jetty as a testing backend but we want to be able to use <strong>any</strong> backend - Angular2Boot uses SpringBoot).</p></li></ul></div>
<div class="paragraph"><p>No real solution yet&#8230;&#8203;</p></div></section><section id="_integration_tests"><h2>Integration tests</h2><div class="paragraph"><p>Using <strong>Selenium WebDriver</strong> and <strong>Spring</strong> integration testing facilities, it is done easily!</p></div></section></section>
<section><section id="_demo"><h2>Demo!</h2></section><section id="__11" data-background="images/orchard-blueprint.jpg" data-background-size="contain"></section><section id="__12" data-background="images/orchard-tree.jpg" data-background-size="contain"></section></section>
<section id="_advantages_of_angular2boot"><h2>Advantages of Angular2Boot</h2><div class="ulist"><ul><li><p>Developper doesn&#8217;t need to know internals of Angular2Gwt, everything is taken care of.</p></li><li><p>Workflow is really comfortable.</p></li><li><p>GWT compilation without User module (Widgets) is dead fast.</p></li><li><p>Really easy to bootstrap a working application (only one maven dependency in fact).</p></li><li><p>Optimizations done by GWT are still very powerful: fast application, small download.</p></li></ul></div></section>
<section id="_javascript_and_java_commmunities_need_to_exchange"><h2>Javascript and Java commmunities need to exchange!</h2><div class="ulist"><ul><li><p>WebPack inspired by GWT&#8217;s code splitting,</p></li><li><p>Problems solved by Java since 20 years should inspire JS!</p></li><li><p>Dynamism of the JS ecosystem should inpire Java!</p></li></ul></div></section>
<section id="_use_cases"><h2>Use cases</h2><div class="ulist"><ul><li><p>100% Java applications (small or big),</p></li><li><p>Service implementations in Java (strongly typed Web service interfacing),</p></li><li><p>JS, Typescript and Java integration,</p></li><li><p>Would fit well with JHipster&#8230;&#8203;</p></li></ul></div></section>
<section><section id="_future_work_ideas"><h2>Future work, ideas</h2></section><section id="_generate_ui_code_from_model_objects"><h2>Generate UI code from model objects</h2><div class="paragraph"><p>Code generation is not easy in Javascript but really easy in Java.</p></div>
<div class="paragraph"><p>(see <a href="http://www.lteconsulting.fr/annotation-processing/#/">GWTCon talk on JSR-269</a>).</p></div></section><section id="_generate_service_access_code_from_backend_interface"><h2>Generate service access code from backend interface</h2><div class="paragraph"><p>Same idea as the previous one&#8230;&#8203;</p></div></section><section id="_ts_definitions_generation"><h2>TS definitions generation</h2><div class="paragraph"><p>Generate TS descriptions of Java components for easy integration of Java components into a TS Angular application.</p></div></section><section id="_run_angular_in_nashorn_to_do_server_side_rendering_angular_universal"><h2>Run Angular in Nashorn to do server-side rendering (Angular Universal)</h2></section><section id="_try_that_in_nativescript"><h2>Try that in NativeScript</h2></section><section id="_module_loading"><h2>Module loading</h2><div class="paragraph"><p>Not easy!</p></div>
<div class="paragraph"><p>Best is maybe to wait for GWT3 (J2Cl) which will be more ES7 module friendly.</p></div>
<div class="paragraph"><p>This will allow more AOT compilation optimizations (Angular compiler may be able to work on the generated code).</p></div>
<div class="paragraph"><p>Better integration with JS build and packaging tools.</p></div></section><section id="_static_analysis_of_java_code_is_really_easy"><h2>Static analysis of Java code is really easy!</h2></section><section id="_bundling_the_gwt_generated_js_together_with_angular_runtime_for_better_compression"><h2>Bundling the GWT generated JS together with Angular runtime for better compression.</h2></section></section>
<section id="_conclusion"><h2>Conclusion</h2><div class="ulist"><ul><li><p>Tested on little projects, was very impressive!</p></li><li><p>Gives GWT a second youth! (only uses the core of it).</p></li><li><p>(IMHO) Take the opportunity to throw some rules out of the window! (getter/setter, naming, &#8230;&#8203;).</p></li></ul></div></section>
<section id="_questions"><h2>Questions?</h2></section>
<section id="_thanks_it_was_a_pleasure"><h2>Thanks, it was a pleasure!</h2><div class="paragraph"><p><a href="http://lteconsulting.fr/angular2boot/">lteconsulting.fr/angular2boot</a></p></div></section></div></div><script src="reveal.js/lib/js/head.min.js"></script><script src="reveal.js/js/reveal.js"></script><script>// See https://github.com/hakimel/reveal.js#configuration for a full list of configuration options
Reveal.initialize({
  // Display controls in the bottom right corner
  controls: true,
  // Display a presentation progress bar
  progress: true,
  // Display the page number of the current slide
  slideNumber: false,
  // Push each slide change to the browser history
  history: true,
  // Enable keyboard shortcuts for navigation
  keyboard: true,
  // Enable the slide overview mode
  overview: true,
  // Vertical centering of slides
  center: true,
  // Enables touch navigation on devices with touch input
  touch: true,
  // Loop the presentation
  loop: false,
  // Change the presentation direction to be RTL
  rtl: false,
  // Turns fragments on and off globally
  fragments: true,
  // Flags if the presentation is running in an embedded mode,
  // i.e. contained within a limited portion of the screen
  embedded: false,
  // Number of milliseconds between automatically proceeding to the
  // next slide, disabled when set to 0, this value can be overwritten
  // by using a data-autoslide attribute on your slides
  autoSlide: 0,
  // Stop auto-sliding after user input
  autoSlideStoppable: true,
  // Enable slide navigation via mouse wheel
  mouseWheel: false,
  // Hides the address bar on mobile devices
  hideAddressBar: true,
  // Opens links in an iframe preview overlay
  previewLinks: false,
  // Theme (e.g., beige, black, league, night, serif, simple, sky, solarized, white)
  // NOTE setting the theme in the config no longer works in reveal.js 3.x
  //theme: Reveal.getQueryHash().theme || 'moon',
  // Transition style (e.g., none, fade, slide, convex, concave, zoom)
  transition: Reveal.getQueryHash().transition || 'slide',
  // Transition speed (e.g., default, fast, slow)
  transitionSpeed: 'default',
  // Transition style for full page slide backgrounds (e.g., none, fade, slide, convex, concave, zoom)
  backgroundTransition: 'fade',
  // Number of slides away from the current that are visible
  viewDistance: 3,
  // Parallax background image (e.g., "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'")
  parallaxBackgroundImage: '',
  // Parallax background size in CSS syntax (e.g., "2100px 900px")
  parallaxBackgroundSize: '',

  // The "normal" size of the presentation, aspect ratio will be preserved
  // when the presentation is scaled to fit different resolutions. Can be
  // specified using percentage units.
  width: 960,
  height: 700,

  // Factor of the display size that should remain empty around the content
  margin: 0.1,

  // Bounds for smallest/largest possible scale to apply to content
  minScale: 0.2,
  maxScale: 1.5,

  // Optional libraries used to extend on reveal.js
  dependencies: [
      { src: 'reveal.js/lib/js/classList.js', condition: function() { return !document.body.classList; } },
      { src: 'reveal.js/plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
      { src: 'reveal.js/plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } },
      { src: 'reveal.js/plugin/zoom-js/zoom.js', async: true, condition: function() { return !!document.body.classList; } },
      { src: 'reveal.js/plugin/notes/notes.js', async: true, condition: function() { return !!document.body.classList; } }
  ]
});</script></body></html>